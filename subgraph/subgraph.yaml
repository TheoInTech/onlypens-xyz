specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: OnlyPensEscrow
    network: mainnet # Change to appropriate network (e.g., base, goerli, etc.)
    source:
      address: "0x0000000000000000000000000000000000000000" # Replace with actual contract address
      abi: OnlyPensEscrow
      startBlock: 0 # Replace with contract deployment block
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - GigPackage
        - Deliverable
        - GhostwriterInvitation
        - ActivityEvent
        - PaymentEvent
        - User
        - GlobalStats
      abis:
        - name: OnlyPensEscrow
          file: ./abis/OnlyPensEscrow.json
      eventHandlers:
        - event: GigPackageCreated(indexed uint256,indexed address,uint256,uint256)
          handler: handleGigPackageCreated
        - event: DeliverableCreated(indexed uint256,indexed uint256,string,uint256)
          handler: handleDeliverableCreated
        - event: GhostwriterInvited(indexed uint256,indexed address)
          handler: handleGhostwriterInvited
        - event: InvitationAccepted(indexed uint256,indexed address)
          handler: handleInvitationAccepted
        - event: InvitationDeclined(indexed uint256,indexed address)
          handler: handleInvitationDeclined
        - event: DeliverableSubmitted(indexed uint256,indexed uint256,indexed address)
          handler: handleDeliverableSubmitted
        - event: DeliverableRevised(indexed uint256,indexed uint256,indexed address)
          handler: handleDeliverableRevised
        - event: DeliverableApproved(indexed uint256,indexed uint256,indexed address)
          handler: handleDeliverableApproved
        - event: DeliverableRejected(indexed uint256,indexed uint256,indexed address)
          handler: handleDeliverableRejected
        - event: PaymentReleased(indexed uint256,indexed uint256,indexed address,uint256)
          handler: handlePaymentReleased
        - event: GigPackageCompleted(indexed uint256)
          handler: handleGigPackageCompleted
        - event: GigPackageCancelled(indexed uint256)
          handler: handleGigPackageCancelled
        - event: GigPackageExpired(indexed uint256)
          handler: handleGigPackageExpired
      file: ./src/mappings.ts
